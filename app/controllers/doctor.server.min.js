"use strict";var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getfilterDoctor=function(a,b){console.log(a.query.lastName),Doctor.find({lastName:{$regex:a.query.lastName}}).exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getfilterDoctor=function(a,b){console.log(a.query),Doctor.find({patientFirstName:{$regex:a.query.patientFirstName}}).exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getfilterDoctor=function(a,b){console.log(a.query),Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),errorHandler=require("./errors.server.controller"),Doctor=mongoose.model("Doctors"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Este Pais ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.create=function(a,b){var c=new Doctor(a.body);c.user=a.user,c.save(function(a){return a?11e3===a.code?b.status(401).send({message:"Pais ya existe"}):b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.doctor)},exports.update=function(a,b){var c=a.doctor;c.DoctorCI=a.body.DoctorCI,c.firstName=a.body.firstName,c.lastName=a.body.lastName,c.DoctorEmail=a.body.DoctorEmail,c.DoctorTelefono=a.body.DoctorTelefono,c.DoctorDireccion=a.body.DoctorDireccio,c.DoctorTelefonoOff=a.body.DoctorTelefonoOff,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.clinicaList=a.body.clinicaList,c.save(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports["delete"]=function(a,b){var c=a.doctor;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{asc:"firstName"}};Doctor.find().filter(e).order(g).page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Doctor.find().exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.DoctorByID=function(a,b,c,d){Doctor.findById(d).populate("user","displayName").exec(function(b,e){return b?c(b):e?(a.doctor=e,void c()):c(new Error("Failed to load doctor "+d))})},exports.hasAuthorization=function(a,b,c){return a.doctor.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};