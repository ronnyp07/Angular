"use strict";var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};var mongoose=require("mongoose"),Patients=mongoose.model("Patients"),getErrorMessage=function(a){if(!a.errors)return"Error de servidor desconocido";for(var b in a.errors)if(a.errors[b].message)return a.errors[b].message};exports.create=function(a,b){var c=new Patients(a.body);c.creador=a.user,c.save(function(a){return a?b.status(400).send({message:getErrorMessage(a)}):void b.json(c)})},exports["delete"]=function(a,b){var c=a.patient;c.remove(function(a){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.list=function(a,b){var c=a.query.count||5,d=a.query.page||1,e={filters:{field:["name"],mandatory:{contains:a.query.filter}}},f={start:(d-1)*c,count:c},g={sort:{desc:"_id"}};Patients.find().filter(e).order(g).populate("pais").populate("ciudad").populate("sector").populate("clientes").populate("locations").page(f,function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.getList=function(a,b){Patients.find().populate("locations").sort("patientFirstName").exec(function(a,c){return a?b.status(400).send({message:errorHandler.getErrorMessage(a)}):void b.jsonp(c)})},exports.update=function(a,b){var c=a.patient;c.PatientCI=a.body.PatientCI,c.patientFirstName=a.body.patientFirstName,c.patientLastName=a.body.patientLastName,c.patientDOB=a.body.patientDOB,c.patientEdad=a.body.patientEdad,c.patientSexo=a.body.patientSexo,c.patientEC=a.body.patientEC,c.patientTelefono=a.body.patientTelefono,c.clientes=a.body.clientes,c.patientPolisa=a.body.patientPolisa,c.patientDireccion=a.body.patientDireccion,c.locations=a.body.locations,c.pais=a.body.pais,c.ciudad=a.body.ciudad,c.sector=a.body.sector,c.save(function(a){return a?b.status(400).send({message:a}):void b.jsonp(c)})},exports.read=function(a,b){b.jsonp(a.patient)},exports.patientByID=function(a,b,c,d){Patients.findById(d).populate("user","displayName").populate("locations").exec(function(b,e){return b?c(b):e?(a.patient=e,void c()):c(new Error("Failed to load procs "+d))})},exports.hasAuthorization=function(a,b,c){return a.patient.user.id!==a.user.id?b.status(403).send("User is not authorized"):void c()};