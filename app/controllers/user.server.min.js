"use strict";var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};var User=require("mongoose").model("User"),bcrypt=require("bcryptjs"),passport=require("passport"),getErrorMessage=function(a){var b="";if(a.code)switch(a.code){case 11e3:case 11001:b="Usuario ya existe";break;default:b="Se ha producido un error"}else for(var c in a.errors)a.errors[c].message&&(b=a.errors[c].message);return b};exports.renderSignin=function(a,b,c){return a.user?b.redirect("/"):void b.render("signin",{title:"Sign-in Form",messages:a.flash("error")||a.flash("info")})},exports.renderSignup=function(a,b,c){return a.user?b.redirect("/"):void b.render("signup",{title:"Login"})},exports.signup=function(a,b){var c=bcrypt.hashSync(a.body.password,bcrypt.genSaltSync(10)),d=new User({firstName:a.body.firstName,lastName:a.body.lastName,email:a.body.email,username:a.body.username,password:c});d.save(function(a){if(a){console.log(a);var a="Huvo un error con su usuario por favor trate de nuevo";11e3===a.code&&(a="Este usuario ya existe intente con uno nuevo"),b.render("signup",{err:a})}else console.log("suppose to be saved"),b.redirect("/")})},exports.signout=function(a,b){a.logout(),b.redirect("/")},exports.requiresLogin=function(a,b,c){return a.isAuthenticated()?void c():b.status(401).send({message:"Usuario no está identificado"})},exports.login=function(a,b){User.findOne({username:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(a.session.user=d,console.log("verore"),b.redirect("#!/")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.getUser=function(a,b){User.findOne({id:a.body.username},function(c,d){d&&bcrypt.compareSync(a.body.password,d.password)?(b.locals.user=d,b.redirect("/dashboard")):b.render("signin",{err:"Verificar su informacion e intentar de nuevo"})})},exports.renderDashboard=function(a,b){User.findOne({id:a.body.username},function(c,d){d?(console.log("it work"),b.locals.user=d,b.render("dashboard")):(a.session.reset(),b.redirect("/signin"))})};