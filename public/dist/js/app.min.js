"Use strict";angular.module("ciudad",["pais"]),angular.module("ciudad").config(["$stateProvider",function(a){a.state("ciudad",{url:"/ciudad",templateUrl:"ciudad/views/list-ciudad.client.view.html"})}]);var ciudadModule=angular.module("ciudad");ciudadModule.controller("ciudadController",["$scope","$http","$routeParams","$location","Authentication","Ciudad","Pais","Notify","$modal","$log",function(a,b,c,d,e,f,g,h,i,j){"use strict";this.authentication=e,this.ciudad=f.query(),this.modelCreate=function(a){var b=i.open({templateUrl:"ciudad/views/create-ciudad.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){j.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=i.open({templateUrl:"ciudad/views/edit-ciudad.client.view.html",controller:["$scope","$modalInstance","ciudad",function(a,b,d){a.ciudad=d,a.ciudad.rpais=c.pais._id,h.sendbroadCast("noError","this is a message"),a.ok=function(){b.close(a.ciudad)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{ciudad:function(){return c}}});d.result.then(function(b){a.selected=b},function(){j.info("Modal dismissed at: "+new Date)})},this.remove=function(a){if(a){a.$remove();for(var b in this.ciudad)this.ciudad[b]===a&&this.ciudad.splice(b,1)}else this.ciudad.$remove(function(){})}}]),ciudadModule.controller("modalResutl",function(a,b){"use strict";a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}),ciudadModule.controller("CiudadCreateController",["$scope","Ciudad","Notify","Pais",function(a,b,c,d){"use strict";this.pais=d.query(),this.create=function(){var d=new b({name:this.name,pais:this.Selectedpais});d.$save(function(a){c.sendMsg("newPis",{id:a._id})},function(b){a.error=b.data.message})}}]),ciudadModule.controller("ciudadUpdateController",["$scope","Authentication","Ciudad","Pais","Notify",function(a,b,c,d,e){"use strict";this.pais=d.query(),this.update=function(b){var d=new c({_id:b._id,name:b.name,pais:a.ciudad.rpais});d.$update(function(){e.sendMsg("newPis",{id:"update"})},function(b){a.error=b.data.message})}}]),ciudadModule.directive("ciudadList",["Ciudad","Notify",function(a,b){"use strict";return{restrict:"E",transclude:!0,templateUrl:"ciudad/views/ciudad-list.template.html",link:function(c,d,e){b.getMsg("newPis",function(b,d){c.ciudadCtrl.ciudad=a.query()})}}}]),angular.module("ciudad").factory("Ciudad",["$resource",function(a){return a("api/ciudad/:ciudadId",{ciudadId:"@_id"},{update:{method:"PUT"}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(a),console.log(this.mgs)},b.broadCast=function(b){a.$broadcast("noError",b)},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]),angular.module("pais",[]),angular.module("pais").config(["$stateProvider",function(a){a.state("pais",{url:"/pais",templateUrl:"pais/views/list-pais.client.view.html"})}]);var paisModule=angular.module("pais");paisModule.controller("PaisController",["$scope","$http","$routeParams","$location","Authentication","Pais","$modal","$log","Notify",function(a,b,c,d,e,f,g,h,i){this.authentication=e,this.pais=f.query(),a.refered=!1,this.modelCreate=function(a){var b=g.open({templateUrl:"pais/views/create-pais.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){h.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=g.open({templateUrl:"pais/views/edit-pais.client.view.html",controller:["$scope","$modalInstance","pais",function(a,b,c){a.pais=c,a.ok=function(){b.close(a.pais)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{pais:function(){return c}}});d.result.then(function(b){a.selected=b},function(){h.info("Modal dismissed at: "+new Date)})},a.$on("handleBroadcast",function(){a.returnPais&&(this.pais=a.returnPais,a.returnPais="")}),this.remove=function(a){if(a){a.$remove();for(var b in this.pais)this.pais[b]===a&&this.pais.splice(b,1)}else this.pais.$remove(function(){})}}]),paisModule.controller("modalResutl",["$scope","$modalInstance",function(a,b){a.$on("noError",function(){b.close(),a.ok=function(){}}),a.cancel=function(){b.dismiss("cancel")}}]),paisModule.controller("PaisCreateController",["$scope","Pais","Notify",function(a,b,c){this.create=function(){var d=new b({name:this.name});d.$save(function(a){c.sendMsg("newPis",{id:a._id}),c.sendbroadCast("noError")},function(b){a.error=b.data.message})}}]),paisModule.controller("PaisUpdateController",["$scope","Authentication","Pais",function(a,b,c){a.authentication=b,this.update=function(b){var c=b;c.$update(function(){},function(b){a.error=b.data.message})}}]),paisModule.directive("paisList",["Pais","Notify",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"pais/views/pais-list.template.html",link:["scope","element","attr",function(c,d,e){b.getMsg("newPis",function(b,d){c.paisCtrl.pais=a.query()})}]}}]),angular.module("pais").factory("Pais",["$resource",function(a){return a("api/pais/:paisId",{paisId:"@_id"},{update:{method:"PUT"}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(),console.log(this.mgs)},b.broadCast=function(){a.$broadcast("noError")},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]),angular.module("clientes",["pais","ciudad","sector"]),angular.module("clientes").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("listClientes",{url:"/clientes",templateUrl:"clientes/views/list-clientes.client.view.html"})}]);var clienteModule=angular.module("clientes");clienteModule.controller("clienteController",["$scope","$http","$location","Authentication","Pais","Ciudad","Sector","Cliente","Notify","ngTableParams","$modal","$log",function(a,b,c,d,e,f,g,h,i,j,k,l){this.authentication=d;var m={page:1,count:15,filter:{name:name}},n={total:0,counts:[15,20,25],getData:function(b,c){h.get(c.url(),function(d){c.total(d.total),b.resolve(d.results),a.total=d.total})}};a.tableParams=new j(m,n),this.modelCreate=function(a){var b=k.open({templateUrl:"clientes/views/create-clientes.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){l.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=k.open({templateUrl:"clientes/views/edit-clientes.client.view.html",controller:["$scope","$modalInstance","cliente",function(a,b,d){a.cliente=d,a.cliente.rpais=c.pais,a.cliente.rciudad=c.ciudad,a.cliente.rsector=c.sector,a.ok=function(){b.close(a.cliente)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{cliente:function(){return c}}});d.result.then(function(b){a.selected=b},function(){l.info("Modal dismissed at: "+new Date)})},a.doSearch=function(){a.tableParams.reload()},i.getMsg("clinicaLoad",function(b,c){a.doSearch(),alertify.success("Acci贸n realizada exitosamente!! !!")}),this.modelRemove=function(b,c){a.cliente=c;var d=k.open({templateUrl:"clientes/views/clientes-delete.template.html",controller:["$scope","$modalInstance","cliente",function(a,b,c){a.cliente=c,a.ok=function(){b.close(a.cliente)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{cliente:function(){return c}}});d.result.then(function(b){a.selected=b},function(){l.info("Modal dismissed at: "+new Date)})},a.remove=function(a){if(a){a.$remove();for(var b in this.cliente)this.cliente[b]===a&&this.cliente.splice(b,1)}else this.cliente.$remove(function(){})}}]),clienteModule.controller("clienteDeleteController",["$scope","Authentication","Cliente","Notify",function(a,b,c,d){this["delete"]=function(b){var e=new c({_id:a.cliente._id});e.$remove(function(){d.sendMsg("clinicaLoad",{id:"nada"})},function(b){a.error=b.data.message})}}]),clienteModule.controller("clienteUpdateController",["$scope","Authentication","Cliente","Notify","Pais","Ciudad","Sector","$mdToast","$animate",function(a,b,c,d,e,f,g,h,i){this.pais=e.query(),this.ciudad=f.query(),this.sector=g.query(),this.filterByPais=function(){this.sector={}},this.filterByCiudad=function(){this.sector=g.query()},this.update=function(b){var e=new c({_id:b._id,name:b.name,tipo:b.tipo,clienteRNC:b.clienteRNC,clienteTelefono:b.clienteTelefono,pais:a.cliente.rpais,ciudad:a.cliente.rciudad,sector:a.cliente.rsector,clienteDireccion:b.clienteDireccion});e.$update(function(){d.sendMsg("clinicaLoad",{id:"nada"})},function(b){a.error=b.data.message})}}]),clienteModule.controller("modalResutl",function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}),clienteModule.controller("clienteCreateController",["$scope","Cliente","Notify","Pais","Ciudad","Sector",function(a,b,c,d,e,f){this.pais=d.query(),this.filterByCity=function(){this.ciudad=e.query(),this.sector=""},this.filterSector=function(){this.sector=f.query()},this.create=function(){var d=new b({name:this.name,tipo:"A",clienteRNC:this.clienteRNC,clienteTelefono:this.clienteTelefono,pais:this.clientePais,ciudad:this.clienteCiudad,sector:this.clienteSector,clienteDireccion:this.clienteDireccion});d.$save(function(a){c.sendMsg("clinicaLoad",{id:"nada"})},function(b){a.error=b.data.message})}}]),clienteModule.directive("clienteList",["Cliente","Notify",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"clientes/views/clientes-list.template.html",link:function(a,c,d){b.getMsg("newPis",function(b,c){a.clienteCtrl.doSearch()})}}}]),angular.module("clientes").factory("Cliente",["$resource",function(a){return a("/api/clientes/:clienteId",{clienteId:"@_id"},{update:{method:"PUT"}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(a),console.log(this.mgs)},b.broadCast=function(b){a.$broadcast("noError",b)},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]).factory("ClientAction",["$http","$q",function(a,b){var c={};return c.getSegurosList=function(){var c=b.defer();return a.post("cliente/getList").success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise},c}]).service("ClienteService",["$http","$q",function(a,b){var c={result:[],load:function(){var d=b.defer();return a.post("cliente/getList").success(function(a){0!==a.length&&angular.forEach(a,function(a){c.result.push(a)}),d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}};return c.load(),c}]),angular.module("doctor",["pais","ciudad","sector","clientes"]),angular.module("doctor").config(["$stateProvider",function(a){a.state("listDoctors",{url:"/doctors",templateUrl:"doctors/views/list-doctor.client.view.html"})}]);var doctorModule=angular.module("doctor");doctorModule.controller("doctorsController",["$scope","$http","$routeParams","$location","Doctors","Authentication","ngTableParams","$modal","$log","Pais","Ciudad","Sector","Cliente","NotifyPatient",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={page:1,count:15,filter:{name:name,clinica:""}},p={total:0,counts:[15,20,25],getData:function(b,c){e.get(c.url(),function(d){c.total(d.total),b.resolve(d.results);for(var e=0;e<d.results.length;e++)d.results[e].clinica="",d.results[e].clinica=d.results[e].clinicaList.length>0?d.results[e].clinicaList[0].clinica:"";a.total=d.total})}};a.calculateAge=function(a){var b=Date.now()-a.getTime();new Date(b)},a.tableParams=new g(o,p),this.modelRemove=function(b,c){a.doctor=c;var d=h.open({templateUrl:"doctors/views/doctor-delete.template.html",controller:["$scope","$modalInstance","doctor",function(a,b,c){a.doctor=c,a.ok=function(){b.close(a.doctor)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{doctor:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=h.open({animation:!0,templateUrl:"doctors/views/edit-doctor.client.view.html",controller:["$scope","$modalInstance","doctor",function(a,b,d){a.doctor=d,a.doctor.rClinicaList=c.clinicaList,a.doctor.rpais=c.pais,a.doctor.rciudad=c.ciudad,a.doctor.rsector=c.sector,a.ok=function(){b.close(a.doctor)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{doctor:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.modelCreate=function(b,c){var d=h.open({templateUrl:"doctors/views/create-doctor.client.view.html",controller:["$scope","$modalInstance","doctor",function(a,b,c){a.ok=function(){b.close(a.doctor)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{doctor:function(){return c}}});d.result.then(function(b){a.createdDoctor=b},function(){i.info("Modal dismissed at: "+new Date)})},a.doSearch=function(){a.tableParams.reload()},n.getMsg("doctorsaved",function(b,c){a.doSearch()})}]),doctorModule.controller("doctorCreateController",["$scope","$http","$routeParams","Authentication","DoctorsService","Doctors","Pais","Ciudad","Sector","Cliente","Notify","$mdToast","$animate","NotifyPatient","$modal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){b.post("cliente/getList").success(function(a){q.cliente=a}).error(function(a){})}var q=this;a.doctorServices=e,q.ClinicaList=[],q.pais=g.query(),q.ciudad=h.query(),q.sector=i.query(),p(),k.getMsg("clinicaLoad",function(a,b){console.log("resive"),p()}),q.AddClinica=function(){var a=document.getElementById("clinicaDoctor"),b=a.options[a.selectedIndex].text;if(q.ClinicaList.length<=0)q.ClinicaList.push({id:this.clientes,clinica:b});else{for(var c=0;c<q.ClinicaList.length;c++)if(q.ClinicaList[c].id===this.clientes)return void alertify.error("Esta clinica ya esta asociada");q.ClinicaList.push({id:q.clientes,clinica:b})}},q.deleteClinica=function(a){q.ClinicaList.splice(a,1)},q.filterByPais=function(){this.sector={}},q.filterByCiudad=function(){this.sector=i.query()},q.DoctorCI={},a.authentication=d,a.referred=!0,q.showPatientSave=function(){l.show(l.simple().content("Nuevo Paciente Guardado!!").position("bottom right").hideDelay(3e3))},q.create=function(b){a.doctorServices.checkDoctor(b).then(function(b){if(b===!0)alertify.error("Doctor ya existe!!");else{a.ok();var c={tipo:q.DoctorCI?q.DoctorCI.tipo:"",value:q.DoctorCI?q.DoctorCI.value:""},d=new f({DoctorCI:c,firstName:q.firstName,lastName:q.lastName,DoctorTelefono:q.DoctorTelefono,DoctorTelefonoOff:q.DoctorTelefonoOff,DoctorSexo:q.DoctorSexo,DoctorEmail:q.DoctorEmail,DoctorDireccion:q.DoctorDireccion,pais:q.doctorPais,ciudad:q.doctorCiudad,sector:q.doctorSector,clinicaList:q.ClinicaList});d.$save(function(a){n.sendMsg("doctorsaved",{doctorSavedInfo:a})},function(b){a.error=b.data.message,console.log(a.error)})}})}}]),doctorModule.controller("doctorUpdateController",["$scope","$http","$routeParams","Authentication","Doctors","OrderServices","Pais","Ciudad","Sector","Cliente","NotifyPatient","$mdToast","$animate","ClienteService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;a.OrderServices=f,this.pais=g.query(),this.ciudad=h.query(),this.sector=i.query(),this.ClientList=[],b.post("cliente/getList").success(function(a){o.cliente=a,console.log(o.cliente)}).error(function(a){}),this.AddClinica=function(){var b=document.getElementById("clinicaDoctor"),c=b.options[b.selectedIndex].text;if(a.doctor.rClinicaList.length<=0)a.doctor.rClinicaList.push({id:this.clientes,clinica:c});else{for(var d=0;d<a.doctor.rClinicaList.length;d++)if(a.doctor.rClinicaList[d].id===this.clientes)return void alertify.error("Esta clinica ya esta asociada");a.doctor.rClinicaList.push({id:this.clientes,clinica:c})}},this.deleteClinica=function(b){console.log(b),a.doctor.rClinicaList.splice(b,1)},this.filterByPais=function(){this.sector={}},this.filterByCiudad=function(){this.sector=i.query()},this.showDoctorSave=function(){l.show(l.simple().content("Nuevo Paciente Guardado!!").position("bottom right").hideDelay(3e3))},this.update=function(b){b.DoctorCI&&(this.DoctorCI={tipo:b.DoctorCI.tipo,value:b.DoctorCI.value});var c=new e({_id:b._id,DoctorCI:this.DoctorCI,firstName:b.firstName,lastName:b.lastName,DoctorEmail:b.DoctorEmail,DoctorTelefono:b.DoctorTelefono,DoctorTelefonoOff:b.DoctorTelefonoOff,DoctorSexo:this.DoctorSexo,DoctorDireccion:b.DoctorDireccion,pais:a.doctor.rpais,ciudad:a.doctor.rciudad,sector:a.doctor.rsector,clinicaList:a.doctor.rClinicaList});c.$update(function(b){a.OrderServices.selectedDoctor&&a.OrderServices.selectedDoctor._id===b._id&&a.OrderServices.setDoctorDetail(a.OrderServices.selectedDoctor._id)},function(b){a.error=b.data.message})}}]),doctorModule.controller("doctorDeleteController",["$scope","Authentication","Doctors","Notify","$mdToast","$animate","NotifyPatient",function(a,b,c,d,e,f,g){a.authentication=b,this["delete"]=function(b){var d=new c({_id:a.doctor._id});d.$remove(function(){g.sendMsg("doctorsaved",{doctorSavedInfo:""})},function(b){a.error=b.data.message})},this.showSimpleToast=function(){e.show(e.simple().content("Doctor Eliminado!!").position("bottom right").hideDelay(3e3))}}]),doctorModule.directive("doctorsList",["Patients","Notify",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"doctors/views/doctor-list.template.html",link:function(a,c,d){b.getMsg("newPis",function(b,c){a.doctorsCtrl.doSearch()})}}}]),doctorModule.directive("doctorsContact",function(){return{restrict:"E",transclude:!0,templateUrl:"doctors/template/doctor-contact-template.html"}}),doctorModule.directive("doctorsClinica",function(){return{restrict:"E",transclude:!0,templateUrl:"doctors/template/doctor-clinica-template.html"}}),doctorModule.directive("doctorscreateContact",function(){return{restrict:"E",transclude:!0,templateUrl:"doctors/template/doctorcreate-contact-template.html"}}),doctorModule.directive("doctorscreateClinica",function(){return{restrict:"E",transclude:!0,templateUrl:"doctors/template/doctorcreate-clinica-template.html"}}),angular.module("doctor").factory("Doctors",["$resource",function(a){return a("api/doctors/:doctorId",{doctorId:"@_id"},{update:{method:"PUT"},save:{method:"POST",isArray:!1}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(a)},b.broadCast=function(b){a.$broadcast("noError",b)},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]).service("DoctorsService",["$http","$q","Doctors",function(a,b,c){var d={result:[],selectedDoctor:null,refresh:function(){return d.result=[],d.load()},checkDoctor:function(a){var c=b.defer();return d.load().then(function(){for(var b=!1,e=0;e<d.result.length;e++)if(d.result[e].firstName&&d.result[e].lastName){var f=d.result[e].firstName.trim()+" "+d.result[e].lastName.trim(),g=a.firstName.trim()+" "+a.lastName.trim();if(f.toLowerCase()===g.toLowerCase())return b=!0,void c.resolve(b)}c.resolve(b)}),c.promise},load:function(){d.result=[];var c=b.defer();return a.post("doctor/getList").success(function(a){0!==a.length&&angular.forEach(a,function(a){d.result.push(a)}),c.resolve(a)}).error(function(a){c.reject(a)}),c.promise}};return d.load(),d}]),angular.module("patients",["pais","ciudad","sector","clientes"]),angular.module("patients").config(["$stateProvider",function(a){"use strict";a.state("patients",{url:"/patients",templateUrl:"patients/views/list-patients.client.view.html"})}]);var patientModule=angular.module("patients");patientModule.controller("pacientsController",["$scope","$http","$routeParams","$location","Authentication","Patients","ngTableParams","$modal","$log","Pais","Ciudad","Sector","Cliente","NotifyPatient","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";a.isSaving=!1;var p={page:1,count:15,filter:{name:name}},q={total:0,counts:[15,20,25],getData:function(b,c){f.get(c.url(),function(d){c.total(d.total),b.resolve(d.results),a.total=d.total})}};a.tableParams=new g(p,q),n.getMsg("saved",function(b,c){a.tableParams.reload(),a.isSaving=!1}),n.getMsg("updating",function(b,c){a.isSaving=!0}),n.getMsg("updated",function(b,c){a.tableParams.reload(),a.isSaving=!1,alertify.success("Acci贸n realizada exitosamente!! !!")}),this.modelRemove=function(b,c){a.patient=c;var d=h.open({templateUrl:"patients/views/patient-delete.template.html",controller:function(a,b,c){a.patient=c,a.ok=function(){b.close(a.patient)},a.cancel=function(){b.dismiss("cancel")}},size:b,resolve:{patient:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=h.open({animation:!0,templateUrl:"patients/views/edit-patient.client.view.html",controller:["$scope","$modalInstance","patient",function(a,b,d){a.patient=d,a.patient.rpais=c.pais?c.pais._id:"",a.patient.rciudad=c.ciudad?c.ciudad._id:"",a.patient.rsector=c.sector?c.sector._id:"",a.patient.rcliente=c.clientes?c.clientes._id:"",a.patient.rlocation=c.locations?c.locations._id:"",a.ok=function(){b.close(a.patient)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{patient:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.modelCreate=function(a){var b=h.open({templateUrl:"patients/views/create-patient.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){i.info("Modal dismissed at: "+new Date)})},this.doSearch=function(){a.tableParams.reload()}}]),patientModule.controller("PatientsCreateController",["$scope","$http","$routeParams","Authentication","Patients","Pais","Ciudad","Sector","Cliente","NotifyPatient","$mdToast","$animate",function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=this;this.paisD=f.query(),this.ciudad=g.query(),this.sector=h.query(),this.cliente=i.get(),b.post("locations/getList").success(function(a){m.cliente=a}).error(function(a){}),this.filterByCity=function(){null===this.pais?(this.ciudad=null,this.sector=null,this.patientSector=null):(this.ciudad=g.query(),this.sector=null,this.patientSector=null)},this.filterSector=function(){null===this.pais||null===this.ciudad?this.sector=null:this.sector=h.query()},this.calculateAge=function(){},this.PatientCI={},a.authentication=d,a.referred=!0,this.showPatientSave=function(){k.show(k.simple().content("Nuevo Paciente Guardado!!").position("bottom right").hideDelay(3e3))},this.create=function(){j.sendMsg("saving",{id:"nada"}),this.PatientCI={tipo:this.PatientCI.tipo,value:this.PatientCI.tipovalue};var b=new e({PatientCI:this.PatientCI,patientFirstName:this.patientFirstName,patientLastName:this.patientLastName,patientDOB:this.patientDOB,patientEdad:this.patientEdad,patientSexo:this.patientSexo,locations:this.clientes,patientEC:this.patientEC,patientTelefono:this.patientTelefono,clientes:this.clientes,patientPolisa:this.patientPolisa,patientDireccion:this.patientDireccion,pais:this.pais,ciudad:this.patientCiudad,sector:this.patientSector});b.$save(function(a){j.sendMsg("saved",{patientSavedInfo:a}),j.sendMsg("patientsaved",{patientSavedInfo:a})},function(b){a.error=b.data.message})}}]),patientModule.controller("PatientsUpdateController",["$scope","$http","$routeParams","Authentication","Patients","Pais","Ciudad","Sector","Cliente","NotifyPatient","$mdToast","$animate","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=this;a.dateOptions={changeYear:!0,changeMonth:!0,yearRange:"1900:-0"},this.pais=f.query(),this.ciudad=g.query(),this.sector=h.query(),b.post("locations/getList").success(function(a){n.location=a}).error(function(a){}),this.filterByCity=function(){null===this.pais?(this.ciudad=null,this.sector=null,this.patientSector=null):(this.ciudad=g.query(),this.sector=null,this.patientSector=null)},this.filterSector=function(){null===this.pais||null===this.ciudad?this.sector=null:this.sector=h.query()},this.filterByCiudad=function(){this.sector=h.query()},this.showPatientSave=function(){k.show(k.simple().content("Nuevo Paciente Guardado!!").position("bottom right").hideDelay(3e3))},this.update=function(a){j.sendMsg("updating",{id:"nada"}),this.PatientCI={tipo:a.PatientCI?a.PatientCI.tipo:"",value:a.PatientCI?a.PatientCI.value:""};var b=new e({_id:a._id,PatientCI:this.PatientCI,patientFirstName:a.patientFirstName,patientLastName:a.patientLastName,patientDOB:a.patientDOB,patientEdad:a.patientEdad,patientSexo:a.patientSexo,patientEC:a.patientEC,patientTelefono:a.patientTelefono,clientes:a.rcliente?a.rcliente:null,locations:a.rlocation?a.rlocation:null,patientPolisa:a.patientPolisa,patientDireccion:a.patientDireccion,pais:a.rpais?a.rpais:null,ciudad:a.rciudad?a.rciudad:null,sector:a.rsector?a.rsector:null});b.$update(function(a){j.sendMsg("updated",{id:"nada"}),j.sendMsg("patientsaved",{patientSavedInfo:a})},function(a){})}}]),patientModule.controller("patientDeleteController",["$scope","Authentication","Patients","NotifyPatient","$mdToast","$animate",function(a,b,c,d,e,f){"use strict";a.authentication=b,this["delete"]=function(b){var e=new c({_id:a.patient._id});e.$remove(function(){d.sendMsg("removed",{id:"nada"})},function(b){a.error=b.data.message})},this.showSimpleToast=function(){e.show(e.simple().content("Paciente Eliminado!!").position("bottom right").hideDelay(3e3))}}]),patientModule.directive("phone",function(){"use strict";return{restrice:"A",require:"ngModel",link:function(a,b,c,d){var e=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;angular.element(b).bind("blur",function(){var a=this.value;e.test(a)?angular.element(this).next().next().css("display","none"):angular.element(this).next().next().css("display","block")})}}}),patientModule.directive("patientList",["Patients","NotifyPatient",function(a,b){"use strict";return{restrict:"E",transclude:!0,templateUrl:"patients/views/patients-list.template.html",link:function(a,c,d){b.getMsg("newPis",function(b,c){a.pacientsCtrl.doSearch()})}}}]),angular.module("patients").factory("Patients",["$resource",function(a){return a("api/patients/:patientId",{patientId:"@_id"},{update:{method:"PUT"},save:{method:"POST",isArray:!1}})}]).factory("NotifyPatient",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(),console.log(this.mgs)},b.broadCast=function(){a.$broadcast("noError")},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]).service("PatientServices",["$http","$q",function(a,b){var c={results:[],load:function(){var d=b.defer();return a.post("patient/getList").success(function(a){0!==a.length&&angular.forEach(a,function(a){c.results.push(a)}),d.resolve(a)}).error(function(a){}),d.promise}};return c.load(),c}]),angular.module("procs",[]),angular.module("procs").config(["$stateProvider",function(a){a.state("procs",{url:"/procs",templateUrl:"procedimientos/views/list-procedimientos.client.view.html"})}]);var procsModule=angular.module("procs");procsModule.controller("procsController",["$scope","$http","$routeParams","$location","Authentication","Procs","Notify","$modal","$log","ngTableParams","$mdToast","$animate",function(a,b,c,d,e,f,g,h,i,j,k,l){this.authentication=e;var m={page:1,count:5,filter:{name:name}},n={total:0,counts:[5,10,15],getData:function(b,c){f.get(c.url(),function(d){c.total(d.total),b.resolve(d.results),a.total=d.total})}};a.tableParams=new j(m,n),this.modelCreate=function(a){var b=h.open({templateUrl:"procedimientos/views/create-procedimientos.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){i.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=h.open({templateUrl:"procedimientos/views/edit-procedimientos.client.view.html",controller:["$scope","$modalInstance","procs",function(a,b,c){a.procs=c,g.sendbroadCast("noError","this is a message"),a.ok=function(){b.close(a.procs)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{procs:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.modelRemove=function(b,c){a.procs=c;var d=h.open({templateUrl:"procedimientos/views/procedimientos-delete.template.html",controller:function(a,b,c){a.procs=c,a.ok=function(){b.close(a.procs)},a.cancel=function(){b.dismiss("cancel")}},size:b,resolve:{procs:function(){return c}}});d.result.then(function(b){a.selected=b},function(){i.info("Modal dismissed at: "+new Date)})},this.doSearch=function(){a.tableParams.reload()},this.remove=function(a){if(a){a.$remove();for(var b in this.seguro)this.seguro[b]===a&&this.seguro.splice(b,1)}else this.seguro.$remove(function(){})}}]),procsModule.controller("modalResutl",function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}),procsModule.controller("procsCreateController",["$scope","Procs","NotifyPatient","$mdToast","$animate",function(a,b,c,d,e){this.create=function(){var d=new b({name:this.name,costo:this.costo,proType:this.proType});d.$save(function(a){c.sendMsg("procsaved",{procSavedInfo:a})},function(b){401===b.status?alertify.error("Este nombre ya existe!!"):alertify.error("No se pudo completar la operaci贸n!!"),a.error=b.data.message})}}]),procsModule.controller("procsDeleteController",["$scope","Authentication","Procs","Notify","$mdToast","$animate",function(a,b,c,d,e,f){a.authentication=b,this["delete"]=function(b){var e=new c({_id:a.procs._id});e.$remove(function(){d.sendMsg("newPis",{id:"nada"})},function(b){a.error=b.data.message})},this.showSimpleToast=function(){e.show(e.simple().content("Procedimiento Eliminado!!").position("bottom right").hideDelay(3e3))}}]),procsModule.controller("procsUpdateController",["$scope","Authentication","Notify","Procs","$mdToast","$animate",function(a,b,c,d,e,f){this.update=function(b){var e=new d({_id:b._id,name:b.name,costo:b.costo,proType:b.proType});e.$update(function(){c.sendMsg("newPis",{id:"update"})},function(b){a.error=b.data.message})},this.showSimpleUdpdate=function(){e.show(e.simple().content("Procedimiento Guardado!!").position("bottom right").hideDelay(3e3))}}]),clienteModule.directive("procsList",["Procs","Notify",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"procedimientos/views/procedimientos-list.template.html",link:function(a,c,d){b.getMsg("newPis",function(b,c){a.procsCtrl.doSearch()})}}}]),angular.module("procs").factory("Procs",["$resource",function(a){return a("procs/:procsId",{procsId:"@_id"},{update:{method:"PUT"}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(a),console.log(this.mgs)},b.broadCast=function(b){a.$broadcast("noError",b)},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]),angular.module("locations",[]),angular.module("locations").config(["$stateProvider",function(a){a.state("listLocations",{url:"/locations",templateUrl:"locations/views/list-locations.client.view.html"})}]);var locationModule=angular.module("locations");locationModule.controller("locationController",["$scope","$http","$location","Authentication","Pais","Ciudad","Sector","Locations","Notify","ngTableParams","$modal","$log",function(a,b,c,d,e,f,g,h,i,j,k,l){this.authentication=d;var m={page:1,count:15,filter:{name:name}},n={total:0,counts:[15,20,25],getData:function(b,c){h.get(c.url(),function(d){c.total(d.total),b.resolve(d.results),a.total=d.total})}};a.tableParams=new j(m,n),this.modelCreate=function(a){var b=k.open({templateUrl:"locations/views/create-location.client.view.html",controller:"modalResutl",size:a});b.result.then(function(a){},function(){l.info("Modal dismissed at: "+new Date)})},this.modelUpdate=function(b,c){var d=k.open({templateUrl:"locations/views/edit-location.client.view.html",controller:["$scope","$modalInstance","location",function(a,b,d){a.location=d,a.location.rpais=c.pais,a.location.rciudad=c.ciudad,a.location.rsector=c.sector,a.ok=function(){b.close(a.location)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{location:function(){return c}}});d.result.then(function(b){
a.selected=b},function(){l.info("Modal dismissed at: "+new Date)})},a.doSearch=function(){a.tableParams.reload()},i.getMsg("updateLoc",function(b,c){a.doSearch(),alertify.success("Acci贸n realizada exitosamente!! !!")}),this.modelRemove=function(b,c){a.location=c;var d=k.open({templateUrl:"locations/views/delete-location.client.view.html",controller:["$scope","$modalInstance","location",function(a,b,c){a.location=c,a.ok=function(){b.close(a.location)},a.cancel=function(){b.dismiss("cancel")}}],size:b,resolve:{location:function(){return c}}});d.result.then(function(b){a.selected=b},function(){l.info("Modal dismissed at: "+new Date)})},a.remove=function(a){if(a){a.$remove();for(var b in this.location)this.location[b]===a&&this.location.splice(b,1)}else this.location.$remove(function(){})}}]),locationModule.controller("locationDeleteController",["$scope","Authentication","Locations","Notify",function(a,b,c,d){this["delete"]=function(b){var e=new c({_id:a.location._id});e.$remove(function(){d.sendMsg("updateLoc",{id:"nada"})},function(b){a.error=b.data.message})}}]),locationModule.controller("locationUpdateController",["$scope","Authentication","Locations","Notify","Pais","Ciudad","Sector","$mdToast","$animate",function(a,b,c,d,e,f,g,h,i){this.pais=e.query(),this.ciudad=f.query(),this.sector=g.query(),this.filterByPais=function(){this.sector={}},this.filterByCiudad=function(){this.sector=g.query()},this.update=function(b){var e=new c({_id:b._id,name:b.name,tipo:b.tipo,locationRNC:b.locationRNC,locationTelefono:b.locationTelefono,pais:a.location.rpais,ciudad:a.location.rciudad,sector:a.location.rsector,locationDireccion:b.locationDireccion});e.$update(function(){d.sendMsg("updateLoc",{id:"update"})},function(b){a.error=b.data.message})}}]),locationModule.controller("modalResutl",["$scope","$modalInstance",function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),locationModule.controller("locationCreateController",["$scope","Locations","Notify","Pais","Ciudad","Sector",function(a,b,c,d,e,f){this.pais=d.query(),this.filterByCity=function(){this.ciudad=e.query(),this.sector=""},this.filterSector=function(){this.sector=f.query()},this.create=function(){var d=new b({name:this.name,locationRNC:this.locationRNC,locationTelefono:this.locationTelefono,pais:this.locationPais,ciudad:this.locationCiudad,sector:this.locationSector,locationDireccion:this.locationDireccion});d.$save(function(a){c.sendMsg("updateLoc",{id:"nada"})},function(b){a.error=b.data.message})}}]),locationModule.directive("locationList",["Locations","Notify",function(a,b){return{restrict:"E",transclude:!0,templateUrl:"locations/views/locations-list.template.html",link:function(a,c,d){b.getMsg("newPis",function(b,c){a.locationCtrl.doSearch()})}}}]),angular.module("locations").factory("Locations",["$resource",function(a){return a("locations/:locationId",{locationId:"@_id"},{update:{method:"PUT"}})}]).factory("Notify",["$rootScope",function(a){var b={};return b.msg="",b.sendbroadCast=function(a){this.msg=a,this.broadCast(a)},b.broadCast=function(b){a.$broadcast("noError",b)},b.sendMsg=function(b,c){c=c||{},a.$emit(b,c)},b.getMsg=function(b,c,d){var e=a.$on(b,c);d&&d.$on("destroy",e)},b}]).factory("LocationAction",["$http","$q",function(a,b){var c={};return c.getlocationList=function(){var c=b.defer();return a.post("locations/getList").success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise},c}]);